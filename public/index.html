<!--
/*
 * Copyright 2014 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

Author: Michael E. Weigel
-->
<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="UTF-8">
        <title>Gun List App</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="style/gunFactsCatalog.css">
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular.min.js"></script>
        <script src="controllers/gunFactsController.js"></script>
    </head>
    <body>
        <noscript>
        <h2 style="color: #ff0000">Seems your browser doesn't support
            Javascript! Websocket relies on Javascript being enabled. Please
            enable Javascript and reload this page!</h2>
        </noscript>
        <div id="main-content" >
            <h1>19th Century Gun Facts Catalog</h1>
            <div ng-app="gunListApp" ng-controller="gunFactsController">
                <form id="filterForm">
                    <div class="form-group">
                        <div class="input-group">
                            <div class="input-group-addon"><i class="fa fa-search"></i></div>
                            <input type="text" class="form-control" placeholder="Search Guns" ng-model="searchGuns">
                        </div>      
                    </div>
                </form>
                <table class="table">
                    <thead>
                        <tr>
                            <th id="modelName">
                                <a href="#" ng-click="sortType = 'modelName'; sortReverse = !sortReverse">
                                    Model Name
                                    <span ng-show="sortType == 'modelName' && !sortReverse" class="fa fa-caret-down"></span>
                                    <span ng-show="sortType == 'modelName' && sortReverse" class="fa fa-caret-up"></span>
                                </a>
                            </th>
                            <th id="country">
                                <a href="#" ng-click="sortType = 'country'; sortReverse = !sortReverse">
                                    Country
                                    <span ng-show="sortType == 'country' && !sortReverse" class="fa fa-caret-down"></span>
                                    <span ng-show="sortType == 'country' && sortReverse" class="fa fa-caret-up"></span>
                                </a>
                            </th>
                            <th id="caliber">
                                <a href="#" ng-click="sortType = 'caliber'; sortReverse = !sortReverse">
                                    Caliber
                                    <span ng-show="sortType == 'caliber' && !sortReverse" class="fa fa-caret-down"></span>
                                    <span ng-show="sortType == 'caliber' && sortReverse" class="fa fa-caret-up"></span>
                                </a>
                            </th>
                            <th id="actionType">
                                <a href="#" ng-click="sortType = 'actionType'; sortReverse = !sortReverse">
                                    Action Type
                                    <span ng-show="sortType == 'actionType' && !sortReverse" class="fa fa-caret-down"></span>
                                    <span ng-show="sortType == 'actionType' && sortReverse" class="fa fa-caret-up"></span>
                                </a>
                            </th>
                            <th id="ammunition">
                                <a href="#" ng-click="sortType = 'ammunition'; sortReverse = !sortReverse">
                                    Ammunition
                                    <span ng-show="sortType == 'ammunition' && !sortReverse" class="fa fa-caret-down"></span>
                                    <span ng-show="sortType == 'ammunition' && sortReverse" class="fa fa-caret-up"></span>
                                </a>
                            </th>
                            <th id="velocity">
                                <a href="#" ng-click="sortType = 'velocity'; sortReverse = !sortReverse">
                                    Velocity
                                    <span ng-show="sortType == 'velocity' && !sortReverse" class="fa fa-caret-down"></span>
                                    <span ng-show="sortType == 'velocity' && sortReverse" class="fa fa-caret-up"></span>
                                </a>
                            </th>
                            <th id="rof">
                                <a href="#" ng-click="sortType = 'rof'; sortReverse = !sortReverse">
                                    Rate of Fire
                                    <span ng-show="sortType == 'rof' && !sortReverse" class="fa fa-caret-down"></span>
                                    <span ng-show="sortType == 'rof' && sortReverse" class="fa fa-caret-up"></span>
                                </a>
                            </th>
                            <th id="range">
                                <a href="#" ng-click="sortType = 'range'; sortReverse = !sortReverse">
                                    Effective Range
                                    <span ng-show="sortType == 'range' && !sortReverse" class="fa fa-caret-down"></span>
                                    <span ng-show="sortType == 'range' && sortReverse" class="fa fa-caret-up"></span>
                                </a>
                            </th>
                            <th id="startService">
                                <a href="#" ng-click="sortType = 'startService'; sortReverse = !sortReverse">
                                    Start Service
                                    <span ng-show="sortType == 'startService' && !sortReverse" class="fa fa-caret-down"></span>
                                    <span ng-show="sortType == 'startService' && sortReverse" class="fa fa-caret-up"></span>
                                </a>
                            </th>
                            <th id="endService">
                                <a href="#" ng-click="sortType = 'endService'; sortReverse = !sortReverse">
                                    End Service
                                    <span ng-show="sortType == 'endService' && !sortReverse" class="fa fa-caret-down"></span>
                                    <span ng-show="sortType == 'endService' && sortReverse" class="fa fa-caret-up"></span>
                                </a>
                            </th>
                            <th id="manufacturer">
                                <a href="#" ng-click="sortType = 'manufacturer'; sortReverse = !sortReverse">
                                    Manufacturer
                                    <span ng-show="sortType == 'manufacturer' && !sortReverse" class="fa fa-caret-down"></span>
                                    <span ng-show="sortType == 'manufacturer' && sortReverse" class="fa fa-caret-up"></span>
                                </a>
                            </th>
                            <th id="numproduced">
                                <a href="#" ng-click="sortType = 'numproduced'; sortReverse = !sortReverse">
                                    Number Produced
                                    <span ng-show="sortType == 'numproduced' && !sortReverse" class="fa fa-caret-down"></span>
                                    <span ng-show="sortType == 'numproduced' && sortReverse" class="fa fa-caret-up"></span>
                                </a>
                            </th>
                            <th id="description">
                                <a href="#" ng-click="sortType = 'description'; sortReverse = !sortReverse">
                                    Description
                                    <span ng-show="sortType == 'description' && !sortReverse" class="fa fa-caret-down"></span>
                                    <span ng-show="sortType == 'description' && sortReverse" class="fa fa-caret-up"></span>
                                </a>
                            </th>
                            <th id="action">
                                Action
                            </th>
                            <th id="modify">
                                Modify
                            </th>
                        </tr>
                        <tr id="input">
                            <th id="modelName">
                                <input class="form-control" type="text" ng-model="gun.modelName" ng-change="onChange(gun.modelName)" required>
                            </th>
                            <th id="country">
                                <input class="form-control" type="text" ng-model="gun.country" ng-change="onChange(gun.country)" required>
                            </th>
                            <th id="caliber">
                                <input class="form-control" type="text" ng-model="gun.caliber" ng-change="onChange(gun.caliber)" required>
                            </th>
                            <th id="actionType">
                                <input class="form-control" type="text" ng-model="gun.actionType" ng-change="onChange(gun.actionType)" required>
                            </th>
                            <th id="ammunition">
                                <input class="form-control" type="text" ng-model="gun.ammunition" ng-change="onChange(gun.ammunition)" required>
                            </th>
                            <th id="velocity">
                                <input class="form-control" type="number" ng-model="gun.velocity" ng-change="onChange(gun.velocity)" required>
                            </th>
                            <th id="rof">
                                <input class="form-control" type="number" ng-model="gun.rateOfFire" ng-change="onChange(gun.rateOfFire)" required>
                            </th>
                            <th id="range">
                                <input class="form-control" type="number" ng-model="gun.range" ng-change="onChange(gun.range)" required>
                            </th>
                            <th id="startService">
                                <input class="form-control" type="text"  ng-model="gun.startService" ng-change="onChange(gun.startService)" required>
                            </th>
                            <th id="endService">
                                <input class="form-control" type="text"  ng-model="gun.endService" ng-change="onChange(gun.endService)" required>
                            </th>
                            <th id="manufacturer">
                                <input class="form-control" type="text" ng-model="gun.manufacturer" ng-change="onChange(gun.manufacturer)" required>
                            </th>
                            <th id="numproduced">
                                <input class="form-control" type="text" ng-model="gun.numProduced" ng-change="onChange(gun.numProduced)" required>
                            </th>
                            <th id="description">
                                <input class="form-control" type="text" ng-model="gun.description" ng-change="onChange(gun.description)" required>
                            </th>
                            <th id="action"><button class="btn btn-primary" ng-click="addGun()">Add Gun</button></th>
                            <th id="modify"><button class="btn btn-info" ng-click="update(gun._id)">Update</button>&nbsp;<button class="btn btn-info" ng-click="deselect()">Clear</button></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="gun in gunList| orderBy:sortType:sortReverse | filter:searchGuns">
                            <td id="modelName">{{gun.modelName}}</td>
                            <td id="country">{{gun.country}}</td>
                            <td id="caliber">{{gun.caliber}}</td>
                            <td id="actionType">{{gun.actionType}}</td>
                            <td id="ammunition">{{gun.ammunition}}</td>
                            <td id="velocity">{{gun.velocity}}</td>
                            <td id="rof">{{gun.rateOfFire}}</td>
                            <td id="range">{{gun.range}}</td>
                            <td id="startService">{{gun.startService}}</td>
                            <td id="endService">{{gun.endService}}</td>
                            <td id="manufacturer">{{gun.manufacturer}}</td>
                            <td id="numproduced">{{gun.numProduced}}</td>
                            <td id="description">{{gun.description}}</td> 
                            <td id="action"><button class="btn btn-danger" ng-click="remove(gun._id)">Remove</button></td>
                            <td id="modify"><button class="btn btn-warning" ng-click="edit(gun._id)">Edit</button></td>
                        </tr>
                    </tbody>
                </table>	 
            </div>
        </div>
    </body>
</html>
